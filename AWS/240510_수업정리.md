📌아래의 폴더 만들어 주세요  
  
mkdir -p /home/ubuntu/download/upload  
mkdir /home/ubuntu/oracle  
ls -al /home/ubuntu/download/upload  
ls -al /home/ubuntu/oracle  
  
  
1. jar 다시 만들기  
   clean compile package  
   pom.xml 없애기  
   Skip tests 체크박스 제거  
  
  
2. Dockerfile 만들기 && 이미지 만들기
(도커아이디/security_aws:01)  
   (1) 프로젝트 폴더에 이미지가 있는지 확인  
   (2) Dockerfile   
        FROM openjdk:17-ea-11-jdk-slim  
        COPY ./target/myhome4-0.0.1-SNAPSHOT.jar /security.jar   
        COPY ./icecream.png  ./icecream.png
        RUN mkdir ./image && mv ./icecream.png ./image/icecream.png  
        ENTRYPOINT \["java", "-jar", "security.jar"]
    (3) docker image build -t 도커아이디/security_aws:01    -f Dockerfile_aws .  
  
3. 만든 이미지 도커 허브에 올리기  
   docker image push 도커아이디/security_aws:01  
  
4. docker-compose.yaml 파일 완성  
   sudo docker-compose up -d  
   sudo docker-compose down --rmi all

![](../image/Pasted%20image%2020240510103137.png)


![](../image/Pasted%20image%2020240510101350.png)

📌image 폴더는 어디에 있는 걸까? icecream.png 는??


# Jenkins
![](../image/Pasted%20image%2020240510120256.png)

📌Jenkins 서버 따로 / 배포 서버 따로 만든다.

📌STS에서 변경한 내용을 github에 올린다.

📌hook 이벤트를 web에 등록하여 Jenkins가 인식할 수 있도록 한다.

## github repository 생성
## toekn 재발급

## STS에서 web2024 repo clone
## 새로운 프로젝트 생성
![](../image/Pasted%20image%2020240510122549.png)

📌src 폴더 / pom.xml / icecream.png / Dockerfile 복사한 후 github repository에 share / commit / push 한다.


## 새로운 인스턴스를 하나 만든다
📌인스턴스 유형 t2 micro -> 프리티어로 사용 
📌키 페어 - CICD
📌스토리지 구성 30GiB
📌jenkins는 8080 포트를 사용 한다. -> 보안 그룹 추가해야 한다

![](../image/Pasted%20image%2020240510141049.png)

![](../image/Pasted%20image%2020240510141113.png)

📌포트 범위를 8080, 소스에 Anywhere IPv4로 설정한다.


## putty 접속
📌putty로 접속 합니다.  
    (1) Category : Session    
                    Host Name : EC2 퍼블릭 주소 입력  
    (2) Category : Connection -> SSH -> Auth -> Credentials ->  앞에서 EC2 만들면서 생성한 키페어 ppk를 선택합니다.          
    (3) Category : Session   
                   Saved Sessions : jenkins  -> Save  
                   Open 클릭  
    (4) Accept 클릭


## image를 활용하여 jenkins 쓰기
📌도커 설치(https://jongsky.tistory.com/49) 도커 컴포즈는 설치하지 않아도 된다.

📌(https://www.jenkins.io/doc/)
 Jenkins는 소프트웨어 구축, 테스트, 제공 또는 배포와 관련된 모든 종류의 작업을 자동화하는 데 사용할 수 있는 독립형 오픈 소스 자동화 서버입니다. 자바로 제작된 CI(Continuous Integration)  툴입니다.
- 파이프라인 이용해서 CD 까지 같이 해본다!


