# ìŠ¤í”„ë§ MVC êµ¬ì¡° 2 - board(2)
## ê²Œì‹œê¸€ ìƒì„¸ë³´ê¸°
### (1)controller
![](../image/Pasted%20image%2020240422092015.png)
![](../image/Pasted%20image%2020240422093025.png)
ğŸ“Œ@RequestHeader(value="referer", required=false) String beforeURL
- String beforeURL = request.getHeader("referer"); ì˜ë¯¸ë¡œ ì–´ëŠ ì£¼ì†Œì—ì„œ detailë¡œ ì´ë™í–ˆëŠ”ì§€ header ì •ë³´ ì¤‘ì—ì„œ "referer"ë¥¼ í†µí•´ ì•Œ ìˆ˜ ìˆë‹¤. 
- ìˆ˜ì • í›„ detail ì£¼ì†Œë¡œ ì´ë™í•˜ëŠ” ê²½ìš° ì¡°íšŒìˆ˜ëŠ” ì¦ê°€í•˜ì§€ ì•Šë„ë¡ í•œë‹¤.
- myhome4/board/listì—ì„œ ì œëª©ì„ í´ë¦­í•œ ê²½ìš°ì—ë§Œ ì¡°íšŒìˆ˜ê°€ ì¦ê°€í•˜ë„ë¡ í•œë‹¤.

#### ë¬¸ì œ!! ë””í…Œì¼ ì°½ì—ì„œ ìƒˆë¡œê³ ì¹¨í•˜ë©´ ì¡°íšŒìˆ˜ê°€ ì˜¬ë¼ê°„ë‹¤ ...
ğŸ“Œlistì—ì„œ detailë¡œ ë„˜ì–´ê°ˆ ë•Œ íŠ¹ì •í•œ sessionì„ ì£¼ê³ , updateí›„ì— invalidate í•˜ëŠ” ì•„ì´ë””ì–´
ğŸ“ŒPOST ë°©ì‹ì„ í™œìš©í•˜ëŠ” ì•„ì´ë””ì–´


### (2)service
![](../image/Pasted%20image%2020240422093740.png)


### (3)mapper / xml
![](../image/Pasted%20image%2020240422094009.png)
![](../image/Pasted%20image%2020240422094214.png)
![](../image/Pasted%20image%2020240422094840.png)
ğŸ“Œboard_view.jsp ë¥¼ ìˆ˜ì •í•˜ê³ ì„œ ê¸€ ì œëª©ì„ í´ë¦­í•˜ë©´ ì´ëŸ° ë¡œê·¸ê°€ ê¸°ë¡ë˜ì–´ì•¼ í•œë‹¤.

### board_view.jsp
![](../image/Pasted%20image%2020240422100500.png)
![](../image/Pasted%20image%2020240422101357.png)
![](../image/Pasted%20image%2020240422102117.png)
![](../image/Pasted%20image%2020240422102530.png)
![](../image/Pasted%20image%2020240422102729.png)
![](../image/Pasted%20image%2020240422103242.png)
![](../image/Pasted%20image%2020240422103730.png)
![](../image/Pasted%20image%2020240422110046.png)
![](../image/Pasted%20image%2020240422110548.png)
![](../image/Pasted%20image%2020240422110620.png)

#### view.js
![](../image/Pasted%20image%2020240422111445.png)

### error.jsp
![](../image/Pasted%20image%2020240422112559.png)



## ëŒ“ê¸€
### service / mapper / xml
![](../image/Pasted%20image%2020240422113608.png)
#### comments table
![](../image/Pasted%20image%2020240422114111.png)


## ìˆ˜ì • í™”ë©´
### controller
![](../image/Pasted%20image%2020240422121025.png)

### board_modify.jsp
![](../image/Pasted%20image%2020240422122217.png)
![](../image/Pasted%20image%2020240422122630.png)
![](../image/Pasted%20image%2020240422123020.png)



## ìˆ˜ì • ì²˜ë¦¬
### controller
![](../image/Pasted%20image%2020240422123720.png)
ğŸ“Œmodifyform.js ì—ì„œ change ì´ë²¤íŠ¸ check ë³€ìˆ˜ë¥¼ ë‘ì–´ ì—…ë¡œë“œ ìœ ë¬´ë¥¼ ì¶”ì í•˜ê³  ìˆë‹¤. check ë³€ìˆ˜ì˜ ê°’ì„ í™•ì¸í•´ì„œ ì²¨ë¶€íŒŒì¼ì´ ë³€ê²½ë˜ì—ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ì²´í¬í•œë‹¤.
- ê¸°ì¡´ ì²¨ë¶€íŒŒì¼ì„ ìœ ì§€í•˜ëŠ” ê²½ìš°
- ê¸°ì¡´ ì²¨ë¶€íŒŒì¼ì„ ì‚­ì œí•˜ëŠ” ê²½ìš°
![](../image/Pasted%20image%2020240422140150.png)
ğŸ“Œif (uploadfile!=null && !uploadfile.isEmpty())
- ì²¨ë¶€íŒŒì¼ì„ ì¶”ê°€í•˜ëŠ” ê²½ìš°
![](../image/Pasted%20image%2020240422141125.png)
![](../image/Pasted%20image%2020240422141728.png)


### service / mapper / xml
![](../image/Pasted%20image%2020240422142403.png)


## ë‹µë³€ í™”ë©´
### controller
![](../image/Pasted%20image%2020240422151020.png)

### board_reply.jsp
![](../image/Pasted%20image%2020240422151758.png)



## ë‹µë³€ ì²˜ë¦¬
### controller
![](../image/Pasted%20image%2020240422152547.png)
ğŸ“Œ351 : redirect ë°©ì‹ìœ¼ë¡œ ì£¼ì†Œ ì´ë™í•  ë•Œ, addAttribute()ë©”ë“œë¥¼ í™œìš©í•˜ë©´ ì¿¼ë¦¬ ìŠ¤íŠ¸ë§ í˜•íƒœë¡œ ì…ë ¥í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

### service
![](../image/Pasted%20image%2020240422153255.png)
ğŸ“Œì‘ì—… ì¤‘ í•˜ë‚˜ë¼ë„ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ rollback ëœë‹¤.

### mapper / xml
![](../image/Pasted%20image%2020240422160227.png)



## ì‚­ì œ
![](../image/Pasted%20image%2020240422163519.png)

### ê¸´ ì¿¼ë¦¬ë¬¸ì˜ í…ŒìŠ¤íŠ¸ (Junit)
![](../image/Pasted%20image%2020240422170434.png)
![](../image/Pasted%20image%2020240422171009.png)
![](../image/Pasted%20image%2020240422171232.png)

### controller
![](../image/Pasted%20image%2020240422173730.png)
![](../image/Pasted%20image%2020240422174623.png)

### service
![](../image/Pasted%20image%2020240422175008.png)


